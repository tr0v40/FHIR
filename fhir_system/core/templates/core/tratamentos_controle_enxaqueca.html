{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tratamentos para Enxaqueca</title>

  <!-- GA4 -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BS67486CWG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BS67486CWG');
  </script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <link rel="shortcut icon" href="{% static 'img/favicon.png' %}" type="image/x-icon">

  <style>
    /* =========================
      RESET / BASE
    ========================= */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background-color: #fefefe;
      font-family: Arial, sans-serif;
      overflow-x: hidden;
      min-height: 100%;
      scroll-behavior: smooth;
    }

    /* =========================
      LAYOUT PRINCIPAL
    ========================= */
    .content-area {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      padding: 10px;
      overflow: hidden;
      flex-wrap: wrap;
    }

    /* SIDEBAR */
    .left-sidebar {
      position: sticky;
      top: 900px;
      margin-left: -10px;
      border: 3px solid #eeeeee;
      z-index: 1000;
      width: 300px;
      height: 1700px;
    }

    /* =========================
      HEADER (DESKTOP igual print)
    ========================= */
    .site-header {
      width: 100%;
      background: #fff;
    }

    .header-inner{
      max-width: 1250px;
      margin: 0 auto;
      padding: 28px 20px;
      display: grid;
      grid-template-columns: 1fr 300px;   /* texto | aviso */
      grid-template-rows: auto auto;      /* logo | título */
      column-gap: 48px;
      align-items: start;
    }

    .brand{
      grid-column: 1;
      grid-row: 1;
      display: inline-flex;
      align-items: flex-start;
      text-decoration: none;
    }

    .logo-telix{
      height: 180px;
      width: auto;
      display: block;
      margin-left: -20px;
    }

    .header-main{
      grid-column: 1 / 2;
      grid-row: 2;
    }

    .page-title{
      margin: 0;
      font-size: 35px;
      font-weight: 450;
      line-height: 1.15;
    }

    .page-subtitle{
      margin-top: 6px;
      font-size: 13px;
      color: #000;
      font-weight: 400;
    }

    .btn-filtros{
      margin-top: 14px;
      background-color: #f0f0f0;
      color: #060606;
      border: 1px solid #e4e4e4;
      border-radius: 4px;
      font-weight: 400;
      font-size: 12px;
      padding: 6px 12px;
      display: inline-block;
    }

    .header-warning{
      grid-column: 2 / 3;
      grid-row: 2;
      justify-self: end;
      align-self: flex-start;
      margin-top: 4px;
      background: #000;
      color: #fff;
      padding: 18px 22px;
      border-radius: 6px;
      font-size: 13px;
      line-height: 1.4;
      width: 260px;
      text-align: center;
    }

    /* Card preto duplicado fora do header: mantido mas escondido no desktop */
    .card-aviso { display: none; }

    /* Mobile do header */
    @media (max-width: 768px){
      .header-inner{
        grid-template-columns: 1fr;
        padding: 10px 10px;
        gap: 0;
      }
      .logo-telix{
        height: 180px;
        margin-left: -25px;
      }
      .page-title{
        font-size: 25px;
        margin-top: -25px;
      }
      .page-subtitle{
        font-size: 15px;
        margin-top: 25px;
      }
      .header-warning{ display: none; }
      .btn-filtros{
        margin-top: 25px;
        max-width: 100%;
      }
    }

    /* =========================
      CHECKBOX / ORDENACAO (mantido)
    ========================= */
    .ordenacao-bloco {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 8px;
    }

    .checkbox-container{
      margin-top: -5px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* checkbox custom */
    .checkbox-container input[type="checkbox"]{
      appearance: none;
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border: 2px solid #ccc;
      border-radius: 4px;
      position: relative;
      cursor: pointer;
      margin-right: 8px;
      display: inline-block;
      vertical-align: middle;
    }

    .checkbox-container input[type="checkbox"]:checked{
      background-color: #0094FF;
      border-color: #0094FF;
    }

    .checkbox-container input[type="checkbox"]:checked::after{
      content: '✔';
      color: white;
      font-size: 14px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    #ordenacao-texto{
      font-size: 14px;
      color: #000;
      margin: 0;
    }

    /* =========================
      FILTROS (mantido)
    ========================= */
    .filters{
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-shadow: none !important;
      border: none;
      border-radius: 1px;
      width: 100%;
      margin-bottom: 16px; /* (era -45; removi negativo para evitar “grudar”) */
    }

    .filters label{
      font-size: 14px;
      font-weight: normal;
      color: #555;
      margin-top: 10px;
    }

    .filters h3{
      font-size: 20px;
      font-weight: bold;
      color: #0056b3;
      margin-bottom: 20px;
      text-align: center;
    }

    .filters h6{
      font-weight: bold;
      color: #000;
      margin-bottom: 0;
      text-align: left;
      font-size: 20px;
    }

    .filters select{
      width: 100%;
      max-width: 350px;
      font-size: 14px;
      padding: 5px;
      border: 2px solid #e4e4e4;
      background-color: #f9f9f9;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .filters select:focus{
      outline: none;
      background-color: #ffffff;
    }

    .filters button{
      border: 2px solid #e4e4e4;
      background-color: #f0f0f0;
      color: #060606;
      margin-top: 25px;
      font-weight: normal;
      padding: 8px 16px;
      max-width: 100%;
      min-height: 15px;
      font-size: 12px;
      text-align: center;
      transition: background-color .3s ease, border-color .3s ease;
      width: 100%;
      border-radius: 4px;
    }

    .filters button:hover{
      background: linear-gradient(90deg, #0056b3, #004494);
      transform: scale(1.05);
      border-color: #007bff;
    }

    .filters .form-check{
      text-align: left;
      margin-bottom: 5px;
      padding: 0;
    }

    .form-check-input{
      width: 16px;
      height: 16px;
      margin-top: 2px;
    }

    .form-check-label{
      font-size: 14px;
      color: #333;
    }

    /* EXIBIR (radio-like) */
    .filter-buttons{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content:center;
      margin-bottom: 40px;
    }

    .filter-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border: 1px solid #c9c9c9;
      border-radius: 6px;
      background: #f7f7f7;
      color: #007bff;
      cursor: pointer;
      white-space: nowrap;
      text-align: center;
      flex: 0 0 220px;
      max-width: 225px;
      min-width: 225px;
    }

    .filter-btn input{ margin-right: 8px; }

    .filter-btn:hover{ background-color: #e0e0e0; }

    /* Dropdown contraindicações */
    .contra-scroll{
      max-height: 260px;
      overflow-y: auto;
      background-color: #fff;
      padding-right: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      padding: 12px;
    }

    .form-check.ps-2{ padding-left: 12px; }

    .form-check + .form-check{
      border-top: 1px solid #eee;
      padding-top: 8px;
      margin-top: 8px;
    }

    button.btn-outline-primary{
      background-color: #f9f9f9;
      text-align: left;
    }

    /* =========================================================
       CARD / LISTAGEM
       ========================================================= */
    .tratamento-card{
      display:flex !important;
      flex-direction:row !important;
      align-items:center !important;
      justify-content:space-between;
      gap:24px;
      width:100%;
      max-width:1200px;
      margin:20px auto;
      padding:18px 28px;
      box-shadow:0 4px 10px rgba(0,0,0,0.1);
      transition: transform .3s, box-shadow .2s ease;
      text-decoration:none;
      color:inherit;
    }
    .tratamento-card:hover{
      transform:scale(1.02);
      box-shadow:0 4px 12px rgba(0,0,0,0.15);
      cursor:pointer;
    }
    .tratamento-content{
      display:flex !important;
      flex-direction:row !important;
      align-items:center !important;
      gap:24px;
      width:100%;
    }
    .tratamento-card img{
      width:120px !important;
      height:120px !important;
      border-radius:50%;
      object-fit:cover;
      flex:0 0 120px;
      margin:0 !important;
      display:block;
    }
    .tratamento-info{ flex: 1 1 auto; min-width:0; }
    .tratamento-info h3{ font-size:25px; font-weight:bold; color:#050606; margin:0 0 6px 0; }

    .eficacia-container{
      flex: 0 0 260px;
      width: 260px;
      margin-left:auto;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-self:center;
      align-items:flex-start;
      text-align:left;
    }
    .eficacia-bar-container{
      width:100%;
      background-color:#e0e0e0;
      height:20px;
      border-radius:8px;
      position:relative;
      margin-bottom:5px;
    }
    .efficacy-filled{ height:100%; border-radius:8px; background-color:#0094FF; }
    .efficacy-marker{
      width:14px;height:14px;
      background-color:#0094FF;
      position:absolute;top:0;
      transform:translateX(-50%);
      border-radius:50%;
    }
    .tratamento-descricao{
  margin-top: 28px;   /* aumenta o gap abaixo do botão */
  margin-bottom: 20px;
  text-align: justify;

}

/* Centraliza os ícones abaixo de "Tratamentos" */
.footer-social-center{
  display: flex;
  justify-content: center !important;
  align-items: center;
  gap: 14px;
  margin-top: 14px;
  width: 100%;
}
    /* =========================
      CARD AVISO MOBILE
    ========================= */
    .card-aviso-mobile{
      display: none;
      background-color: #000;
      color: white;
      padding: 16px 24px;
      border-radius: 6px;
      font-size: 14px;
      max-width: 280px;
      text-align: center;
      line-height: 1.4;
      margin: 30px auto;
    }

    @media (max-width: 768px){
      .card-aviso-mobile{ display:block; }
    }

    /* =========================
      BOTÃO VOLTAR AO TOPO (inline)
    ========================= */
    .back-to-top-wrap{
      display: flex;
      justify-content: center;
      margin: 24px 0 16px;
    }

    .back-to-top-inline{
      position: static;
      border: 1px solid #e4e4e4;
      background: #f0f0f0;
      color: #060606;
      border-radius: 999px;
      padding: 10px 16px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      opacity: 1;
      pointer-events: auto;
      transition: filter .15s ease, opacity .15s ease !important;
      transform: none !important;
    }

    .back-to-top-inline:hover{
      filter: brightness(0.98);
      transform: none !important;
    }

    /* =========================
      FOOTER
    ========================= */
    .footer .social-btn {
      font-size: 1.5rem;
      margin-right: 15px;
      color: #6c757d;
      transition: color 0.3s ease;
    }

    .footer .social-btn:hover { color: #007bff; }

    .footer a{
      color: #6c757d;
      text-decoration: none;
    }

    .footer a:hover{
      text-decoration: underline;
      color: #007bff;
    }

    .footer h5{
      font-weight: bold;
      color: #000;
    }

    .footer .row{
      text-align: center;
      justify-content: center;
    }

    .footer p{
      color: #6c757d;
      font-size: 14px;
      margin-bottom: 5px;
    }

    .footer p + p{ margin-top: 0; }

    .footer-bottom{
      width: 100%;
      text-align: center;
      padding: 10px 0;
      background-color: #f5f5f5;
    }

    .footer .footer-social{
      display: flex;
      justify-content: center;
      gap: 15px;
    }

    .footer .list-unstyled li{ padding: 5px 0; }

    footer.footer .row > div{
      padding-left: 30px;
      padding-right: 30px;
    }

    /* =========================
      MOBILE: ORDEM DOS BLOCOS
    ========================= */
    @media (max-width: 768px){
      .content-area{
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      /* tratamentos primeiro */
      .content-area > .tratamentos { order: 1 !important; }

      /* sidebar/filtros por último */
      .left-sidebar, .filters{
        order: 9999 !important;
        position: static !important;
        top: auto !important;
        height: auto !important;
        margin-top: 24px !important;
      }

      .tratamento-content{
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
      }

      .tratamento-info, .eficacia-container{
        align-items: center;
        text-align: center;
      }

      .eficacia-container{
        width: 100%;
        min-width: 0;
        justify-content: center;
      }

      /* esconde “Exibir” no mobile, como antes */
      .filters > .filter-buttons,
      .filters h6{
        display: none !important;
      }

      @media (max-width: 768px){

  /* Card inteiro vira coluna */
  .tratamento-card{
    flex-direction: column !important;
    align-items: stretch !important;
    justify-content: flex-start !important;
    gap: 14px !important;
    padding: 16px 14px !important;
    margin: 14px auto !important;
    width: 100% !important;
    max-width: 520px !important;
  }

  /* Conteúdo interno também vira coluna (isso corrige o “lado a lado” do print) */
  .tratamento-content{
    flex-direction: column !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 14px !important;
    width: 100% !important;
  }

  /* Imagem centralizada e menor */
  .tratamento-card img{
    width: 96px !important;
    height: 96px !important;
    flex: 0 0 auto !important;
    margin: 0 auto !important;
  }

  /* Texto ocupa a largura toda */
  .tratamento-info{
    width: 100% !important;
    text-align: center !important;
  }

  .tratamento-info h3{
    font-size: 22px !important;
  }

  /* Botão "ver detalhes" centralizado (remove margin-left: auto do inline) */
  .tratamento-info .btn.mt-2{
    margin-left: 0 !important;
    margin-right: 0 !important;
    justify-content: center !important;
    width: 100% !important;
    max-width: 160px !important;
  }

  /* Descrição melhor no mobile */
  .tratamento-descricao{
    text-align: justify !important;
    margin-top: 16px !important;
  }

  /* Eficácia deixa de ter largura fixa 260px */
  .eficacia-container{
    width: 100% !important;
    flex: 0 0 auto !important;
    margin-left: 0 !important;
    align-items: center !important;
    text-align: center !important;
  }

  .eficacia-bar-container{
    width: 100% !important;
  }

  .eficacia-range{
    text-align: center !important;
  }
}

    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header class="site-header">
    <div class="header-inner">
      <a class="brand" href="https://www.telix.inf.br/">
        <img class="logo-telix" src="{% static 'img/logo.png' %}" alt="Telix Logo">
      </a>

      <div class="header-main">
        <h1 class="page-title">Tratamentos para controle de enxaqueca</h1>

        <p class="page-subtitle">
          Tratamentos ordenados por: Ordem decrescente de eficácia máxima
        </p>

        <a
          href="#"
          class="btn btn-filtros"
          id="btnOutrosFiltros"
          data-path="/tratamentos-controle-enxaqueca-com-filtros/"
        >
          Outros filtros e ordenações
        </a>
      </div>

      <aside class="header-warning">
        <p><strong>Não se automedique.</strong><br>Consulte um profissional de saúde.</p>
      </aside>
    </div>
  </header>

  <!-- (mantido) Card aviso mobile no final -->
  <!-- (mantido) Card aviso duplicado fora do header (não aparece no desktop) -->
  <div class="card-aviso">
    <p><strong>Não se automedique.</strong><br>Consulte um profissional de saúde.</p>
  </div>

  <!-- =========================
      CONTEÚDO (Django)
  ========================= -->
  <div class="content-area">
    <div class="tratamentos">

      {#========================= LISTAGEM ÚNICA (GLOBAL) =========================#}
      {% if todos_os_tratamentos %}
        <div class="tratamento-section all">
          {% for item in todos_os_tratamentos %}
            {% with tratamento=item.obj %}
              <a href="{% url 'detalhes_tratamentos' slug=item.obj.slug %}?tipo={{ item.tipo|urlencode }}" class="text-decoration-none text-dark">
                <div class="tratamento-card">
                  <div class="tratamento-content">

                    <!-- Imagem -->
                    {% if tratamento.imagem %}
                      <img src="{{ tratamento.imagem.url }}" alt="{{ tratamento.nome }}" class="img-fluid">
                    {% else %}
                      <img src="{% static 'default-image.jpg' %}" alt="Imagem não disponível">
                    {% endif %}

                    <!-- Info -->
                    <div class="tratamento-info">
                      <h3>{{ tratamento.nome }}</h3>

                      <h3 style="color: #0094FF; font-size: 12px;">
                        {% for tipo in tratamento.tipo_tratamento.all %}
                          {{ tipo.nome }}{% if not forloop.last %}, {% endif %}
                        {% empty %}
                          Nenhum tipo selecionado
                        {% endfor %}
                      </h3>

                      <p><strong>Princípio ativo:</strong> {{ tratamento.principio_ativo|default:"ND" }}</p>
                      <p><strong>Fabricante:</strong> {{ tratamento.fabricante|default:"ND" }}</p>

                      <span class="btn mt-2" style="background-color: #e0e0e0; color: #000; border: none; font-weight: 500; font-size: 14px; padding: 5px 35px; display: inline-flex; align-items: center; gap: 5px; margin-left: auto;">
                        ver detalhes <span style="font-weight: bold;">&#8250;</span>
                      </span>

                      <p class="tratamento-descricao">{{ tratamento.descricao }}</p>
                    </div>

                    <!-- Eficácia -->
                    <div class="eficacia-container">
                      <p style="font-size: 20px; font-weight: 700; text-align: left; font-family: 'Inter', sans-serif; color: rgb(163,162,162);">
                        Eficácia: <span style="color: #000; font-weight: 700; font-size: 20px;">{{ item.tipo }}</span>
                      </p>

                      <div class="eficacia-bar-container">
                        <div class="efficacy-filled" style="width: {{ item.max|floatformat:0 }}%;"></div>
                        <div class="efficacy-marker" style="left: calc({{ item.max|floatformat:0 }}% - 7px);"></div>
                      </div>

                      <p class="eficacia-range" style="font-family: 'Inter', sans-serif; font-weight: 700; font-size: 25px; text-align: left;">
                        <span style="color: #888; font-weight: 500;">{{ item.min_str }} a</span>
                        <span style="color: #000; font-weight: bold;"> {{ item.max_str }}%</span>
                      </p>

                      <p id="titulo-prazo-{{ tratamento.id }}" style="margin: 0; font-family: 'Inter', sans-serif; font-weight: 500; font-size: 15px; color: #000;">
                        Prazo para efeito
                      </p>
                      <p id="valor-prazo-{{ tratamento.id }}" style="margin: 4px 0 0 0; font-family: 'Inter', sans-serif; font-size: 16px; font-weight: bold; color: #000;">
                        {{ tratamento.prazo_efeito_min_formatado }} a {{ tratamento.prazo_efeito_max_formatado }}
                      </p>

                      <!-- Campos auxiliares/ocultos mantidos -->
                      <span id="faixa-risco-{{ tratamento.id }}" class="replace-dot" style="display:none;">
                        {{ tratamento.reacao_maxima }}%
                      </span>

                      <span id="faixa-eficacia-{{ tratamento.id }}" class="replace-dot" style="display:none;">
                        {{ item.min|floatformat:2 }}% a {{ item.max|floatformat:2 }}%
                      </span>

                      <span id="faixa-prazo-{{ tratamento.id }}" style="display:none;">
                        {{ tratamento.prazo_efeito_min_formatado }} a {{ tratamento.prazo_efeito_max_formatado }}
                      </span>

                      <p class="preco-range" id="faixa-preco-{{ tratamento.id }}" style="display:none;">
                        R$ {{ tratamento.preco|default:tratamento.custo_medicamento }}
                      </p>

                      <span id="faixa-rigor-{{ tratamento.id }}" style="display: none;">
                        {% for i in "1234567" %}
                          {% if i|add:"0" <= tratamento.rigor_maximo %}
                            <span style="display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;font-size:0.85rem;font-weight:600;border-radius:4px;border:1px solid #007bff;color:#fff;background:#007bff;">
                              {{ i }}
                            </span>
                          {% else %}
                            <span style="display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;font-size:0.85rem;font-weight:600;border-radius:4px;border:1px solid #007bff;color:#007bff;background:transparent;">
                              {{ i }}
                            </span>
                          {% endif %}
                        {% endfor %}
                      </span>

                      <p id="faixa-data-{{ tratamento.id }}" style="display:none;">
                        {{ tratamento.ultima_pesquisa|date:"m/Y"|default:"-" }}
                      </p>

                      <span id="faixa-participantes-{{ tratamento.id }}" style="display:none;">
                        {{ tratamento.max_participantes|default:"-" }} participantes
                      </span>
                    </div>

                  </div>
                </div>
              </a>
            {% endwith %}
          {% endfor %}
        </div>

      {#========================= EXIBIÇÃO POR SEÇÕES (controle) =========================#}
      {% else %}
        <div class="tratamento-section controle">
          {% for item in tratamentos_controle %}
            {% with tratamento=item.obj %}
              <a href="{% url 'detalhes_tratamentos' slug=item.obj.slug %}?tipo={{ item.tipo|urlencode }}" class="tratamento-card text-decoration-none text-dark">
                <div class="tratamento-content">

                  {% if tratamento.imagem %}
                    <img src="{{ tratamento.imagem.url }}" alt="{{ tratamento.nome }}" class="img-fluid">
                  {% else %}
                    <img src="{% static 'default-image.jpg' %}" alt="Imagem não disponível">
                  {% endif %}

                  <div class="tratamento-info">
                    <h3>{{ tratamento.nome }}</h3>

                    <h3 style="color: #0094FF;font-size: 12px;">
                      {% for tipo in tratamento.tipo_tratamento.all %}
                        {{ tipo.nome }}{% if not forloop.last %}, {% endif %}
                      {% empty %}Nenhum tipo selecionado{% endfor %}
                    </h3>

                    <p><strong>Princípio ativo:</strong> {{ tratamento.principio_ativo|default:"ND" }}</p>
                    <p><strong>Fabricante:</strong> {{ tratamento.fabricante|default:"ND" }}</p>

                    <div class="btn mt-2" style="background-color: #e0e0e0; color: #000; border: none; font-weight: 500; font-size: 14px; padding: 5px 35px; display: inline-flex; align-items: center; gap: 5px; margin-left: auto;">
                      ver detalhes <span style="font-weight: bold;">&#8250;</span>
                    </div>

                    <p class="tratamento-descricao">{{ tratamento.descricao }}</p>
                  </div>

                  <div class="eficacia-container">
                    <p style="font-size: 20px; font-weight: 700; text-align: left; font-family: 'Inter', sans-serif; color: rgb(163,162,162);">
                      Eficácia: <span style="color: #000; font-weight: 700; font-size: 20px;">{{ item.tipo }}</span>
                    </p>

                    <div class="eficacia-bar-container">
                      <div class="efficacy-filled" style="width: {{ item.max|floatformat:0 }}%;"></div>
                      <div class="efficacy-marker" style="left: calc({{ item.max|floatformat:0 }}% - 7px);"></div>
                    </div>

                    <p class="eficacia-range" style="font-family: 'Inter', sans-serif; font-weight: 700; font-size: 25px; text-align: left;">
                      <span style="color: #888; font-weight: 500;">{{ item.min_str }} a</span>
                      <span style="color: #000; font-weight: bold;"> {{ item.max_str }}%</span>
                    </p>

                    <p id="titulo-prazo-{{ tratamento.id }}" style="margin: 0; font-family: 'Inter', sans-serif; font-weight: 500; font-size: 15px; color: #000;">
                      Prazo para efeito
                    </p>
                    <p id="valor-prazo-{{ tratamento.id }}" style="margin: 4px 0 0 0; font-family: 'Inter', sans-serif; font-size: 16px; font-weight: bold; color: #000;">
                      {{ tratamento.prazo_efeito_min_formatado }} a {{ tratamento.prazo_efeito_max_formatado }}
                    </p>
                  </div>
                </div>
              </a>
            {% endwith %}
          {% endfor %}
        </div>
      {% endif %}

    </div>
  </div>

  <!-- Card aviso no final do mobile -->
  <div class="card-aviso-mobile">
    <p><strong>Não se automedique.</strong><br>Consulte um profissional de saúde.</p>
  </div>

  

  <!-- FOOTER -->
  <footer class="footer mt-5 pt-4 border-top">
    <div class="container text-center">

      <!-- ÍCONES NO TOPO APENAS NO MOBILE -->
      <div class="footer-social d-flex justify-content-center mb-4 d-md-none">
        <a href="https://www.instagram.com/telix.inf.br/" target="_blank" class="social-btn mx-2"><i class="fab fa-instagram fa-lg"></i></a>
        <a href="https://www.facebook.com/people/Telix-contexto-na-sa%C3%BAde/100089318347896/" class="social-btn mx-2"><i class="fab fa-facebook-f fa-lg"></i></a>
        <a href="https://www.linkedin.com/company/telix-canais-de-not%C3%ADcias" class="social-btn mx-2"><i class="fab fa-linkedin-in fa-lg"></i></a>
        <a href="https://www.youtube.com/@TelixSaude" class="social-btn mx-2"><i class="fab fa-youtube fa-lg"></i></a>
      </div>

      <div class="row justify-content-center text-start mt-4">
        <div class="col-12 col-md-4 mb-4">
          <h5>Explorar</h5>
          <ul class="list-unstyled">
            <li><a href="https://www.telix.inf.br/pacientes">Pacientes</a></li>
            <li><a href="https://www.telix.inf.br/profissionaisdesaude">Profissionais de Saúde</a></li>
            <li><a href="https://www.telix.inf.br/divulgacao-de-servicos-e-pesquisas-de-saude">Empresas</a></li>
            <li><a href="https://www.telix.inf.br/blog">Blog</a></li>
            <li><a href="https://www.telix.inf.br/quem-somos-telix-contexto-na-saude">Quem somos</a></li>
          </ul>
        </div>

        <div class="col-12 col-md-4 mb-4">
          <h5>Tratamentos</h5>
          <ul class="list-unstyled">
            <li><a href="http://cadastros.telix.inf.br/tratamentos/">Tratamentos</a></li>
            <li><a href="https://www.telix.inf.br/in%C3%ADcio">Opinião de Especialistas</a></li>

            <div class="footer-social d-none d-md-flex justify-content-center mb-3" style="margin-right: 158px; padding-top: 20px;">
              <a href="https://www.instagram.com/telix.inf.br/" class="social-btn mx-2"><i class="fab fa-instagram fa-lg"></i></a>
              <a href="https://www.facebook.com/people/Telix-contexto-na-sa%C3%BAde/100089318347896/" class="social-btn mx-2"><i class="fab fa-facebook-f fa-lg"></i></a>
              <a href="https://www.linkedin.com/company/telix-canais-de-not%C3%ADcias" class="social-btn mx-2"><i class="fab fa-linkedin-in fa-lg"></i></a>
              <a href="https://www.youtube.com/@TelixSaude" class="social-btn mx-2"><i class="fab fa-youtube fa-lg"></i></a>
            </div>
          </ul>
        </div>

        <div class="col-12 col-md-4 mb-4">
          <h5>Fale com a gente!</h5>
          <p><a href="https://api.whatsapp.com/send/?phone=45999040371&text&type=phone_number&app_absent=0">(45) 99904-0371</a></p>
          <p><a href="mailto:contato@telix.inf.br">contato@telix.inf.br</a></p>
          <p style="padding-top: 20px;"><a class="mt-3 mb-0">Linca Telecomunicações Ltda</a></p>
          <p><a class="mt-0">CNPJ: 03.376.788/0001-23</a></p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    (function () {
      /* =========================
        Link "Outros filtros e ordenações"
      ========================= */
      const btnOutros = document.getElementById('btnOutrosFiltros');
      if (btnOutros) {
        btnOutros.addEventListener('click', (event) => {
          event.preventDefault();
          const path = btnOutros.getAttribute('data-path') || '/tratamentos-controle-enxaqueca-com-filtros/';
          const isDevDjango = (location.hostname === '127.0.0.1' || location.hostname === 'localhost') && location.port === '8000';
          const target = isDevDjango ? ('http://localhost:3000' + path) : (location.origin + path);
          window.location.href = target;
        });
      }

      /* =========================
        Filtros dinâmicos (sem duplicar listeners)
      ========================= */
      const criterioSelect = document.getElementById('filtro_criterio');
      const valorContainer = document.getElementById('filtro_valor_container');
      const rigorContainer = document.getElementById('filtro_rigor_container');

      function toggleFiltroContainers(valor) {
        if (!valorContainer && !rigorContainer) return;

        const showValor = (valor === 'participantes' || valor === 'data');
        const showRigor = (valor === 'rigor');

        if (valorContainer) valorContainer.style.display = showValor ? 'block' : 'none';
        if (rigorContainer) rigorContainer.style.display = showRigor ? 'block' : 'none';
      }

      if (criterioSelect) {
        criterioSelect.addEventListener('change', () => {
          toggleFiltroContainers(criterioSelect.value);
        });

        // aplica estado inicial
        toggleFiltroContainers(criterioSelect.value);
      }

      /* =========================
        Exibição dinâmica (Prazo/Eficácia/Risco/etc)
      ========================= */
      function mudarExibicao(tipo) {
        if (!tipo) return;

        const titulos = {
          eficacia: 'Eficácia',
          risco: 'Risco de Reação Adversa',
          prazo: 'Prazo para efeito',
          preco: 'Preço do Tratamento',
          participantes: 'Número de participantes',
          rigor: 'Rigor da Pesquisa',
          data: 'Data da Pesquisa'
        };

        const classe = 'faixa-' + tipo;

        // Título
        document.querySelectorAll('[id^="titulo-prazo-"]').forEach(el => {
          el.innerText = titulos[tipo] || '';
        });

        // Valor
        document.querySelectorAll('[id^="valor-prazo-"]').forEach(el => {
          const id = el.id.split('-').pop();
          const fonte = document.getElementById(`${classe}-${id}`);
          el.innerHTML = fonte ? fonte.innerHTML : '-';
        });
      }

      /* =========================
        Substituir ponto por vírgula + formatar participantes
      ========================= */
      function substituirPontosPorVirgulas() {
        // 1) Ajusta números decimais em blocos visíveis
        const elementos = document.querySelectorAll('.eficacia-range, .preco-range, .replace-dot');
        elementos.forEach((el) => {
          if (!el || !el.innerHTML) return;
          el.innerHTML = el.innerHTML.replace(/\d+\.\d+/g, (match) => match.replace('.', ','));
        });

        // 2) Participantes (quando for exibido via mudarExibicao, ele vem do innerHTML do span)
        // Se você tiver um bloco visível com "participantes", pode ajustar aqui também.

        // 3) Barras (width em % no estilo) — mantém como você já faz (não muda layout)
        document.querySelectorAll('.efficacy-filled').forEach((bar) => {
          const w = bar.style.width || '';
          if (w.includes(',')) {
            // caso algum lugar tenha jogado vírgula (evita bug)
            bar.style.width = w.replace(',', '.');
          }
        });
      }

      /* =========================
        Back to top
      ========================= */
      const backBtn = document.getElementById('backToTopBtn');
      if (backBtn) {
        backBtn.addEventListener('click', (e) => {
          e.preventDefault();
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      /* =========================
        On load
      ========================= */
      window.addEventListener('DOMContentLoaded', () => {
        // aplica exibição via querystring (?ordenacao=eficacia etc)
        const urlParams = new URLSearchParams(window.location.search);
        const criterio = urlParams.get('ordenacao');
        if (criterio) mudarExibicao(criterio);

        substituirPontosPorVirgulas();
      });

    })();
  </script>
</body>
</html>
