{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    .container {
        max-width: 90%;
        margin: auto;
    }

    /* Centralizar t√≠tulo */
    .titulo-tratamento {
        text-align: center;
        font-size: 28px;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 30px;
    }

    .titulo-tratamento img {
        max-width: 60px;
        margin-right: 10px;
    }
    /* Ajustando a largura das colunas */
    .table th:nth-child(1) { width: 10%; }  /* Efic√°cia */
    .table th:nth-child(2) { width: 18%; }  /* Estudo */
    .table th:nth-child(3) { width: 10%; }  /* Data */
    .table th:nth-child(4) { width: 40%; }  /* Descri√ß√£o */
    .table th:nth-child(5) { width: 22%; }  /* Refer√™ncia */


    /* Centralizando conte√∫do principal */
    .conteudo-centralizado {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    /* Ajustando o bloco do tratamento */
    .tratamento-container {
        background: #f9f9f9;
        padding: 20px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 30px;
        width: 80%;
        margin: auto;
        margin-bottom: 50px;
    }

    .tratamento-imagem {
        max-width: 250px;
        border-radius: 10px;
        box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
    }

    .tratamento-texto {
        font-size: 18px;
        text-align: left;
    }

    /* Ajustes da tabela na parte inferior */
    .tabela-container {
        width: 100%;
        display: flex;
        justify-content: center;
        margin-top: 50px;
    }

    .table-responsive {
        width: 85%;
    }

    .table {
        width: 100%;
        border-collapse: collapse;
        background: white;
    }

    .table th, .table td {
        padding: 18px;
        text-align: center;
        border: 1px solid #ddd;
        font-size: 18px;
    }

    .thead-dark {
        background-color: #343a40;
        color: white;
    }

    .badge {
        display: inline-block;
        padding: 8px 14px;
        font-size: 16px;
        border-radius: 6px;
    }

    .badge-danger { background-color: #dc3545; color: white; }
    .badge-primary { background-color: #007bff; color: white; }
    .badge-info { background-color: #17a2b8; color: white; }
    .badge-success { background-color: #28a745; color: white; }

    .btn {
        font-size: 16px;
        padding: 10px;
        width: 100%;
    }

</style>

<div class="container mt-5">
    <!-- Nome do Medicamento Centralizado -->
    <div class="titulo-tratamento">
        
        <h2>{{ tratamento.nome }} - Evid√™ncias Cl√≠nicas</h2>
    </div>

    <!-- Informa√ß√µes do Tratamento -->
    <div class="tratamento-container">
        <img src="{{ tratamento.imagem.url }}" class="tratamento-imagem" alt="{{ tratamento.nome }}">
        <div class="tratamento-texto">
            <p><strong>üß™ Princ√≠pio Ativo:</strong> {{ tratamento.principio_ativo }}</p>
            <p><strong>üè≠ Fabricante:</strong> {{ tratamento.fabricante }}</p>
            <p><strong>üî¨ Grau de Evid√™ncia:</strong> <span class="badge badge-info">{{ tratamento.grau_evidencia }}</span></p>
        </div>
    </div>

    <hr>

    <!-- Se√ß√£o de Evid√™ncias Cient√≠ficas na parte inferior -->
    <div class="tabela-container">
        <div class="table-responsive">
            <h4 class="text-success text-center my-4">üìñ Estudos e Evid√™ncias Cient√≠ficas</h4>

            {% if evidencias %}
            <table class="table table-hover table-bordered text-center">
                <thead class="thead-dark">
                    <tr>
                        <th style="width: 15%;">Efic√°cia</th>
                        <th style="width: 20%;">Estudo</th>
                        <th style="width: 15%;">Data</th>
                        <th style="width: 30%;">Descri√ß√£o</th>
                        <th style="width: 20%;">Refer√™ncia</th>
                    </tr>
                </thead>
                <tbody>
                    {% for evidencia in evidencias %}
                    <tr>
                        <!-- Coluna Efic√°cia -->
                        <td>
                            <span class="badge badge-success">
                                {{ evidencia.eficacia_min }}% - {{ evidencia.eficacia_max }}%
                            </span>
                        </td>

                        <!-- Coluna Tipo de Estudo -->
                        <td>
                            {% if evidencia.estudo_randomizado %}
                                <span class="badge badge-danger d-block my-1">üî¥ Randomizado</span>
                            {% endif %}
                            {% if evidencia.duplo_cego %}
                                <span class="badge badge-primary d-block my-1">üîµ Duplo-cego</span>
                            {% endif %}
                            {% if evidencia.placebo_controlado %}
                                <span class="badge badge-info d-block my-1">üü° Placebo-controlado</span>
                            {% endif %}
                        </td>

                        <!-- Coluna Data -->
                        <td>{{ evidencia.data_publicacao|date:"m/Y" }}</td>

                        <!-- Coluna Descri√ß√£o -->
                        <td class="text-left">
                            {{ evidencia.descricao }}
                        </td>

                        <!-- Coluna Refer√™ncia -->
                        <td>
                            {% if evidencia.link_estudo %}
                                <a href="{{ evidencia.link_estudo }}" target="_blank" class="btn btn-primary btn-sm d-block my-1">
                                    üìñ Acessar Estudo
                                </a>
                            {% endif %}
                            {% if evidencia.pdf_estudo %}
                                <a href="{{ evidencia.pdf_estudo.url }}" target="_blank" class="btn btn-secondary btn-sm d-block my-1">
                                    üìÑ Baixar PDF
                                </a>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
                <p class="text-muted text-center">üîç Nenhuma evid√™ncia cl√≠nica encontrada para este tratamento.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
